{
  "resourceType": "StructureDefinition",
  "id": "mobility-risk-assessment",
  "url": "https://github.com/RicardoLSantos/shorthand/StructureDefinition/mobility-risk-assessment",
  "name": "MobilityRiskAssessment",
  "title": "Mobility Risk Assessment Profile",
  "status": "draft",
  "description": "Profile for assessing mobility-related risks",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "RiskAssessment",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/RiskAssessment",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "RiskAssessment.status",
        "path": "RiskAssessment.status",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.method",
        "path": "RiskAssessment.method",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.method.coding",
        "path": "RiskAssessment.method.coding",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "RiskAssessment.method.coding:mobilityAssessment",
        "path": "RiskAssessment.method.coding",
        "sliceName": "mobilityAssessment",
        "min": 1,
        "max": "1",
        "patternCoding": {
          "code": "standardized",
          "system": "http://example.org/CodeSystem/mobility-assessment-method",
          "display": "Standardized Mobility Assessment"
        },
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.subject",
        "path": "RiskAssessment.subject",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.occurrence[x]",
        "path": "RiskAssessment.occurrence[x]",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.basis",
        "path": "RiskAssessment.basis",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://github.com/RicardoLSantos/shorthand/StructureDefinition/mobility-profile",
              "http://hl7.org/fhir/StructureDefinition/Observation",
              "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction",
        "path": "RiskAssessment.prediction",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "outcome"
            }
          ],
          "rules": "open"
        },
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction.outcome",
        "path": "RiskAssessment.prediction.outcome",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction.probability[x]",
        "path": "RiskAssessment.prediction.probability[x]",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction.qualitativeRisk",
        "path": "RiskAssessment.prediction.qualitativeRisk",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:fallRisk",
        "path": "RiskAssessment.prediction",
        "sliceName": "fallRisk",
        "min": 0,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:fallRisk.outcome",
        "path": "RiskAssessment.prediction.outcome",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/fall-risk-outcomes"
        }
      },
      {
        "id": "RiskAssessment.prediction:fallRisk.probability[x]",
        "path": "RiskAssessment.prediction.probability[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "RiskAssessment.prediction:fallRisk.probability[x]:probabilityDecimal",
        "path": "RiskAssessment.prediction.probability[x]",
        "sliceName": "probabilityDecimal",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "decimal"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:fallRisk.qualitativeRisk",
        "path": "RiskAssessment.prediction.qualitativeRisk",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/risk-level"
        }
      },
      {
        "id": "RiskAssessment.prediction:mobilityDecline",
        "path": "RiskAssessment.prediction",
        "sliceName": "mobilityDecline",
        "min": 0,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:mobilityDecline.outcome",
        "path": "RiskAssessment.prediction.outcome",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/mobility-decline-outcomes"
        }
      },
      {
        "id": "RiskAssessment.prediction:mobilityDecline.probability[x]",
        "path": "RiskAssessment.prediction.probability[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "RiskAssessment.prediction:mobilityDecline.probability[x]:probabilityDecimal",
        "path": "RiskAssessment.prediction.probability[x]",
        "sliceName": "probabilityDecimal",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "decimal"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:mobilityDecline.qualitativeRisk",
        "path": "RiskAssessment.prediction.qualitativeRisk",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/risk-level"
        }
      },
      {
        "id": "RiskAssessment.prediction:assistanceNeeded",
        "path": "RiskAssessment.prediction",
        "sliceName": "assistanceNeeded",
        "min": 0,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:assistanceNeeded.outcome",
        "path": "RiskAssessment.prediction.outcome",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/assistance-level-outcomes"
        }
      },
      {
        "id": "RiskAssessment.prediction:assistanceNeeded.probability[x]",
        "path": "RiskAssessment.prediction.probability[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "RiskAssessment.prediction:assistanceNeeded.probability[x]:probabilityDecimal",
        "path": "RiskAssessment.prediction.probability[x]",
        "sliceName": "probabilityDecimal",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "decimal"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "RiskAssessment.prediction:assistanceNeeded.qualitativeRisk",
        "path": "RiskAssessment.prediction.qualitativeRisk",
        "binding": {
          "strength": "required",
          "valueSet": "http://example.org/ValueSet/risk-level"
        }
      },
      {
        "id": "RiskAssessment.note",
        "path": "RiskAssessment.note",
        "mustSupport": true
      }
    ]
  }
}
