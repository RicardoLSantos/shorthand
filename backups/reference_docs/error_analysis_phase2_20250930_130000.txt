FHIR IG ERROR ANALYSIS - Phase 2 Post-Jurisdiction Fix
======================================================
Generated: 2025-09-30 12:47:38 WEST
Total Errors: 291 (down from 469, -38% improvement)
Total Warnings: 188
Total Info: 30

ERROR CATEGORIES (by pattern frequency):
========================================

1. VALUESET BINDING ERRORS (Quick Win - Phase 2.2)
   Count: ~12 errors
   Pattern: "Não foi possível determinar o URI do sistema para o código"
   
   Specific issues:
   - Basic/DefaultAuditConfig: code 'detailed' without system (should be audit-levels#detailed)
   - Basic/DefaultAuditConfig: code 'fhir' without system (should be audit-formats#fhir)
   - Basic/MindfulnessAuditExample: same issues
   
   Fix Strategy: Add system prefix to all codes in Basic resources
   Files affected:
   - input/fsh/config/MindfulnessAuditConfig.fsh
   - input/fsh/audit/MindfulnessAudit.fsh

2. CANONICAL URL MISMATCHES (Medium Priority - Phase 2.3)
   Count: ~7 errors
   Pattern: "URL Mismatch vs"
   
   Issue: CodeSystem ID doesn't match last segment of canonical URL
   Example: CodeSystem/MindfulnessSettingCS but URL ends with /mindfulness-setting
   
   Fix Strategy: Already analyzed in canonical_url_analysis.txt
   Estimated impact: -7 errors

3. UNKNOWN/INVALID SNOMED CT CODES (Research Required - Phase 3.1)
   Count: ~20 errors
   Patterns:
   - "Unknown code '37016008' in SNOMED CT" (Observation.method)
   - "Unknown code '725854004' in SNOMED CT" (component codes)
   - "Unknown code '118682006' in SNOMED CT" (component codes)
   - "Unknown code '364311006' in SNOMED CT" (ValueSet)
   - Wrong Display Name errors for SNOMED codes
   
   Issue: SNOMED CT codes not found in FHIR Terminology Server version
   Fix Strategy: 
   - Validate codes against SNOMED International Edition
   - Replace with valid alternatives if codes are retired
   - Update display names to match official SNOMED

4. UNKNOWN LOINC CODES (Research Required - Phase 3.2)
   Count: ~12 errors
   Patterns:
   - "Unknown code 'LA29043-2' in LOINC"
   - "Unknown code 'LA29042-4' in LOINC"
   - "Unknown code 'LA33058-8' in LOINC"
   - "Wrong Display Name 'UV intensity' for 89027-7"
   - "Wrong Display Name 'Social interaction participants' for 89600-1"
   
   Issue: LOINC codes not found in FHIR TX server or wrong display
   Fix Strategy:
   - Validate against loinc.org
   - Use correct LOINC Answer codes (LA*)
   - Update display names to official LOINC short names

5. INVALID OBSERVATION CATEGORY CODES (Quick Win - Phase 2.4)
   Count: ~8 errors
   Pattern: "Código desconhecido 'nutrition' no CodeSystem observation-category"
   Pattern: "Código desconhecido 'environment' no CodeSystem observation-category"
   
   Issue: Using custom categories not in HL7 observation-category CodeSystem
   Valid categories: social-history, vital-signs, imaging, laboratory, procedure, survey, exam, therapy, activity
   
   Fix Strategy: Use 'social-history' or 'survey' instead of 'nutrition'/'environment'
   Files affected:
   - Multiple StructureDefinition profiles
   - Multiple Observation examples

6. STRUCTUREMAP VALIDATION ERRORS (Low Priority - Phase 4)
   Count: ~5 errors
   Patterns:
   - "O tipo HealthKitMindfulness não é conhecido" (Unknown type)
   - "A trajetória de destino target.effectiveDateTime...é desconhecida" (unknown path)
   
   Issue: StructureMap references unknown logical models
   Fix Strategy: Define logical models or simplify StructureMap

7. CONSENT RESOURCE ERRORS (Quick Win - Phase 2.5)
   Count: ~6 errors
   Issues:
   - Wrong Display Name for LOINC#59284-0 (should be "Consent Document")
   - Unknown RoleCode 'TREAT' (should be valid)
   - Unknown system for practitioner-identifier
   
   Fix Strategy: Update Consent examples with correct display names

8. MESSAGEDEFINI CONSTRAINT ERRORS (Quick Win - Phase 2.6)
   Count: ~4 errors
   Pattern: "md-1: 'Max must be postive int or *'"
   
   Issue: MessageDefinition.focus.max has invalid value
   Fix Strategy: Set max to positive integer or "*"

9. STRUCTUREDEFINITION SNAPSHOT ERRORS (Complex - Phase 3.3)
   Count: ~200+ errors
   Patterns:
   - Pattern value mismatches
   - Cardinality constraints
   - Unknown codes in patterns
   
   Fix Strategy: Regenerate snapshots after fixing terminology issues

QUICK WINS SUMMARY (Phase 2.2-2.6):
===================================
Estimated total: -35 to -50 errors

Priority Order:
1. ValueSet binding codes (Phase 2.2): -12 errors
2. Observation category codes (Phase 2.4): -8 errors  
3. Canonical URL mismatches (Phase 2.3): -7 errors
4. Consent display names (Phase 2.5): -6 errors
5. MessageDefinition constraints (Phase 2.6): -4 errors

Total Quick Wins: ~37 errors (13% reduction)
Target after Phase 2: ~254 errors

RESEARCH-INTENSIVE TASKS (Phase 3):
====================================
- SNOMED CT code validation: ~20 errors
- LOINC code validation: ~12 errors
- StructureDefinition snapshots: ~200 errors

Recommendation: Complete Phase 2 quick wins first, then tackle Phase 3 with Opus 4
