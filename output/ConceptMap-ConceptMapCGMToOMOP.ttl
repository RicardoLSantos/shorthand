@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapCGMToOMOP> a fhir:ConceptMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "ConceptMapCGMToOMOP"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Narrativa gerada: ConceptMap ConceptMapCGMToOMOP</b></p><a name=\"ConceptMapCGMToOMOP\"> </a><a name=\"hcConceptMapCGMToOMOP\"> </a><p>Mapeamento de (não especificado) para (não especificado)</p><br/><p><b>Grupo 1 </b>Mapeamento de <a href=\"http://terminology.hl7.org/6.5.0/CodeSystem-v3-loinc.html\">Logical Observation Identifiers, Names and Codes (LOINC)</a> to <a href=\"CodeSystem-omop-concepts-stub.html\">OHDSI OMOP CDM Concepts (External Reference)</a></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>2345-7 (Glucose [Mass/volume] in Serum or Plasma)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>3004501 (Glucose [Mass/volume] in Serum or Plasma)</td><td>VERIFIED OMOP mapping for blood glucose.\n- OMOP concept_id: 3004501\n- Domain: Measurement\n- Use for CGM readings with measurement_type_concept_id = 44818707\n- Unit_concept_id: 8840 (mg/dL) or 8753 (mmol/L)</td></tr><tr><td>97507-8 (Glucose management indicator)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GMI (formerly eA1C) estimates HbA1c from CGM data.\nFormula: GMI (%) = 3.31 + 0.02392 × [mean glucose in mg/dL]\nClinical significance: Allows real-time A1c estimation without blood draw.\nGAP: No OMOP concept exists for GMI.</td></tr><tr><td>41653-7 (Glucose [Mass/volume] mean in Serum or Plasma)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Mean glucose over CGM recording period. Use measurement_source_value for context.</td></tr></table><hr/><p><b>Grupo 2 </b>Mapeamento de <a href=\"CodeSystem-cgm-metrics-cs.html\">CGM Metrics CodeSystem</a> to <a href=\"CodeSystem-omop-concepts-stub.html\">OHDSI OMOP CDM Concepts (External Reference)</a></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>tir (Time in Range (70-180 mg/dL))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">CRITICAL GAP: TIR (Time in Range) has NO OMOP concept.\n- Target: &gt;70% per International Consensus 2019\n- Unit: percentage (%)\n- Most important CGM metric for clinical outcomes\nWorkaround: Store in measurement_source_value = 'TIR:{value}%'</td></tr><tr><td>tbr-l1 (Time Below Range Level 1 (54-69 mg/dL))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Target: &lt;4% per International Consensus. Hypoglycemia Level 1.</td></tr><tr><td>tbr-l2 (Time Below Range Level 2 (&lt;54 mg/dL))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Target: &lt;1% per International Consensus. Clinically significant hypoglycemia.</td></tr><tr><td>tar-l1 (Time Above Range Level 1 (181-250 mg/dL))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Target: &lt;25% per International Consensus. Hyperglycemia Level 1.</td></tr><tr><td>tar-l2 (Time Above Range Level 2 (&gt;250 mg/dL))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Target: &lt;5% per International Consensus. Clinically significant hyperglycemia.</td></tr><tr><td>cv (Coefficient of Variation (%))</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">CV = (SD / Mean) × 100\nTarget: &lt;36% indicates stable glycemia (Monnier et al.)\nCritical for glycemic variability assessment.</td></tr><tr><td>sd (Standard Deviation)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Glucose standard deviation. Unit: mg/dL or mmol/L.</td></tr></table></div>"^^rdf:XMLLiteral
  ] ; # 
  fhir:url [ fhir:v "https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapCGMToOMOP"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "0.1.0"] ; # 
  fhir:name [ fhir:v "ConceptMapCGMToOMOP"] ; # 
  fhir:title [ fhir:v "CGM Metrics to OMOP CDM Mapping"] ; # 
  fhir:status [ fhir:v "active"] ; # 
  fhir:experimental [ fhir:v false] ; # 
  fhir:date [ fhir:v "2025-11-28"^^xsd:date] ; # 
  fhir:publisher [ fhir:v "Ricardo Lourenço dos Santos"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "Ricardo Lourenço dos Santos" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "https://linktr.ee/ricardolsantos" ]
     ] )
  ] ) ; # 
  fhir:description [ fhir:v "Maps Continuous Glucose Monitoring (CGM) metrics to OMOP CDM concepts for federated analytics.\n\nInternational Consensus on Time in Range (Battelino et al., Diabetes Care 2019):\n- TIR (Time in Range 70-180 mg/dL): Target >70% for most patients\n- TBR-L1 (54-69 mg/dL): <4% target\n- TBR-L2 (<54 mg/dL): <1% target\n- TAR-L1 (181-250 mg/dL): <25% target\n- TAR-L2 (>250 mg/dL): <5% target\n- CV (Coefficient of Variation): <36% indicates stable glycemia\n\nTarget OMOP Table: MEASUREMENT\n- measurement_concept_id: mapped OMOP concept\n- value_as_number: CGM metric value\n- unit_concept_id: 8840 (mg/dL) or 8753 (mmol/L)\n- measurement_type_concept_id: 44818707 (Patient self-reported/device)\n\nSupported CGM Systems:\n- Dexcom G6/G7, Stelo (consumer)\n- Abbott Libre 2/3\n- Medtronic Guardian\n- Consumer metabolic monitors (Levels, January AI)"] ; # 
  fhir:jurisdiction ( [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "150" ] ;
       fhir:display [ fhir:v "Europe" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "021" ] ;
       fhir:display [ fhir:v "Northern America a/" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "005" ] ;
       fhir:display [ fhir:v "South America" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "PT" ] ;
       fhir:display [ fhir:v "Portugal" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "US" ] ;
       fhir:display [ fhir:v "United States of America" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "BR" ] ;
       fhir:display [ fhir:v "Brazil" ]
     ] )
  ] ) ; # 
  fhir:purpose [ fhir:v "Enable ETL transformation of CGM data from FHIR to OMOP CDM for participation in OHDSI federated research networks, diabetes registries, and metabolic health research."] ; # 
  fhir:group ( [
     fhir:source [ fhir:v "http://loinc.org"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "http://athena.ohdsi.org/search-terms/terms"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "2345-7" ] ;
       fhir:display [ fhir:v "Glucose [Mass/volume] in Serum or Plasma" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "3004501" ] ;
         fhir:display [ fhir:v "Glucose [Mass/volume] in Serum or Plasma" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "VERIFIED OMOP mapping for blood glucose.\n- OMOP concept_id: 3004501\n- Domain: Measurement\n- Use for CGM readings with measurement_type_concept_id = 44818707\n- Unit_concept_id: 8840 (mg/dL) or 8753 (mmol/L)" ]
       ] )
     ] [
       fhir:code [ fhir:v "97507-8" ] ;
       fhir:display [ fhir:v "Glucose management indicator" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "GMI (formerly eA1C) estimates HbA1c from CGM data.\nFormula: GMI (%) = 3.31 + 0.02392 × [mean glucose in mg/dL]\nClinical significance: Allows real-time A1c estimation without blood draw.\nGAP: No OMOP concept exists for GMI." ]
       ] )
     ] [
       fhir:code [ fhir:v "41653-7" ] ;
       fhir:display [ fhir:v "Glucose [Mass/volume] mean in Serum or Plasma" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Mean glucose over CGM recording period. Use measurement_source_value for context." ]
       ] )
     ] ) ;
     fhir:unmapped [
       fhir:mode [ fhir:v "fixed" ] ;
       fhir:code [ fhir:v "0" ] ;
       fhir:display [ fhir:v "No OMOP concept - requires custom vocabulary extension" ]
     ]
  ] [
     fhir:source [ fhir:v "https://2rdoc.pt/ig/ios-lifestyle-medicine/CodeSystem/cgm-metrics-cs"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "http://athena.ohdsi.org/search-terms/terms"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "tir" ] ;
       fhir:display [ fhir:v "Time in Range (70-180 mg/dL)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "CRITICAL GAP: TIR (Time in Range) has NO OMOP concept.\n- Target: >70% per International Consensus 2019\n- Unit: percentage (%)\n- Most important CGM metric for clinical outcomes\nWorkaround: Store in measurement_source_value = 'TIR:{value}%'" ]
       ] )
     ] [
       fhir:code [ fhir:v "tbr-l1" ] ;
       fhir:display [ fhir:v "Time Below Range Level 1 (54-69 mg/dL)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Target: <4% per International Consensus. Hypoglycemia Level 1." ]
       ] )
     ] [
       fhir:code [ fhir:v "tbr-l2" ] ;
       fhir:display [ fhir:v "Time Below Range Level 2 (<54 mg/dL)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Target: <1% per International Consensus. Clinically significant hypoglycemia." ]
       ] )
     ] [
       fhir:code [ fhir:v "tar-l1" ] ;
       fhir:display [ fhir:v "Time Above Range Level 1 (181-250 mg/dL)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Target: <25% per International Consensus. Hyperglycemia Level 1." ]
       ] )
     ] [
       fhir:code [ fhir:v "tar-l2" ] ;
       fhir:display [ fhir:v "Time Above Range Level 2 (>250 mg/dL)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Target: <5% per International Consensus. Clinically significant hyperglycemia." ]
       ] )
     ] [
       fhir:code [ fhir:v "cv" ] ;
       fhir:display [ fhir:v "Coefficient of Variation (%)" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "CV = (SD / Mean) × 100\nTarget: <36% indicates stable glycemia (Monnier et al.)\nCritical for glycemic variability assessment." ]
       ] )
     ] [
       fhir:code [ fhir:v "sd" ] ;
       fhir:display [ fhir:v "Standard Deviation" ] ;
       fhir:target ( [
         fhir:equivalence [ fhir:v "unmatched" ] ;
         fhir:comment [ fhir:v "Glucose standard deviation. Unit: mg/dL or mmol/L." ]
       ] )
     ] ) ;
     fhir:unmapped [
       fhir:mode [ fhir:v "fixed" ] ;
       fhir:code [ fhir:v "0" ] ;
       fhir:display [ fhir:v "No OMOP concept - International Consensus 2019 metrics not yet in OMOP" ]
     ]
  ] ) . # 

# -------------------------------------------------------------------------------------

