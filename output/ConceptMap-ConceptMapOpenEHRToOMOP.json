{
  "resourceType" : "ConceptMap",
  "id" : "ConceptMapOpenEHRToOMOP",
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Narrativa gerada: ConceptMap ConceptMapOpenEHRToOMOP</b></p><a name=\"ConceptMapOpenEHRToOMOP\"> </a><a name=\"hcConceptMapOpenEHRToOMOP\"> </a><p>Mapeamento de https://ckm.openehr.org/ckm para http://athena.ohdsi.org/search-terms/terms</p><br/><p><b>Grupo 1 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code> to <code>MEASUREMENT</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id5 (SDNN - Standard deviation of NN intervals)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider\" title=\"wider\">maps to wider concept</a></td><td>3034658 (OMOP Concept: Heart rate variability)</td><td>OMOP 3034658 maps to general HRV. Store in MEASUREMENT with value_as_number (ms), unit_concept_id = 8587 (millisecond)</td></tr><tr><td>id6 (RMSSD - Root mean square of successive differences)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">CRITICAL GAP: RMSSD has NO OMOP concept (Concept ID = 0). Requires local custom concept creation. Most important wearable HRV metric.</td></tr><tr><td>id7 (pNN50 - Percentage of NN intervals &gt;50ms)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GAP: pNN50 has no OMOP concept. Requires local custom concept. Unit: percentage</td></tr><tr><td>id13 (LF/HF Ratio)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GAP: LF/HF ratio has no OMOP concept. Indicates sympathovagal balance. Dimensionless ratio.</td></tr><tr><td>id32 (Recording duration)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>4272025 (OMOP Concept: Duration of procedure)</td><td>Store as modifier or in MEASUREMENT_TYPE_CONCEPT_ID context. Critical for HRV interpretation (5min vs 24h)</td></tr><tr><td>id41 (Physiological state)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>4058895 (OMOP Concept: Body position)</td><td>Store in OBSERVATION table with value_as_concept_id for resting/active/sleep states</td></tr></table><hr/><p><b>Grupo 2 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.physical_activity_detailed.v0</code> to <code>MEASUREMENT</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id10 (Step count)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>40770386 (OMOP Concept: Number of steps)</td><td>Store in MEASUREMENT with value_as_number (count), unit_concept_id = 8554 (count)</td></tr><tr><td>id11 (Distance)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>4149130 (OMOP Concept: Distance walked)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 8582 (kilometer) or 8504 (meter)</td></tr><tr><td>id20 (Active calories)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>4074432 (OMOP Concept: Energy expenditure)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 9526 (kilocalorie)</td></tr><tr><td>id32 (Moderately active minutes)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider\" title=\"wider\">maps to wider concept</a></td><td>4090484 (OMOP Concept: Physical activity)</td><td>Store with qualifier concept for moderate intensity. Unit: minutes. WHO guideline target: 150-300 min/week</td></tr><tr><td>id33 (Vigorously active minutes)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider\" title=\"wider\">maps to wider concept</a></td><td>4090484 (OMOP Concept: Physical activity)</td><td>Store with qualifier concept for vigorous intensity. Unit: minutes. WHO guideline target: 75-150 min/week</td></tr></table><hr/><p><b>Grupo 3 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.sleep_architecture.v0</code> to <code>MEASUREMENT</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id13 (Total sleep time)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>40771110 (OMOP Concept: Sleep duration)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 8505 (hour) or 8550 (minute)</td></tr><tr><td>id23 (Deep sleep duration)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GAP: N3/SWS stage duration has no OMOP concept. Critical for sleep quality assessment. Requires local custom concept.</td></tr><tr><td>id24 (REM sleep duration)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GAP: REM stage duration has no OMOP concept. Important for memory consolidation assessment. Requires local custom concept.</td></tr><tr><td>id30 (Sleep efficiency)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">GAP: TST/TIB ratio (%) has no OMOP concept. Key metric for sleep quality. Normal: &gt;85%</td></tr><tr><td>id40 (Sleep score)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Proprietary composite score (0-100). Not suitable for cross-vendor research. Store with vendor qualifier.</td></tr><tr><td>id53 (Average HRV (RMSSD) during sleep)</td><td colspan=\"2\" style=\"background-color: #efefef\">(not mapped)</td><td style=\"background-color: #efefef\">Depends on RMSSD custom concept creation. Critical for recovery assessment.</td></tr></table><hr/><p><b>Grupo 4 </b>Mapeamento de <code>openEHR-EHR-CLUSTER.wearable_device.v0</code> to <code>DEVICE_EXPOSURE</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id2 (Device platform)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider\" title=\"wider\">maps to wider concept</a></td><td>4044180 (OMOP Concept: Wearable sensor)</td><td>Store in DEVICE_EXPOSURE with device_concept_id = 4044180. Add vendor qualifier in device_source_value</td></tr><tr><td>id3 (Device model)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>4044180 (Store in device_source_value)</td><td>Store specific model name in device_source_value field (e.g., 'Apple Watch Series 9')</td></tr><tr><td>id4 (Device category)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>44818707 (OMOP Concept: Patient self-reported)</td><td>Use device_type_concept_id = 44818707 for wearable-generated data provenance</td></tr><tr><td>id23 (Serial number)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>32882 (Store in unique_device_id)</td><td>Map to unique_device_id field in DEVICE_EXPOSURE</td></tr><tr><td>id20 (Firmware version)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#disjoint\" title=\"disjoint\">is not related to</a></td><td>0 (Not mapped - metadata only)</td><td>Firmware version not typically stored in OMOP CDM. Consider NOTE table or custom extension.</td></tr></table></div>"
  },
  "url" : "https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapOpenEHRToOMOP",
  "version" : "0.1.0",
  "name" : "ConceptMapOpenEHRToOMOP",
  "title" : "openEHR Archetype to OMOP CDM Mapping",
  "status" : "active",
  "experimental" : false,
  "date" : "2025-11-25",
  "publisher" : "Ricardo Lourenço dos Santos",
  "contact" : [{
    "name" : "Ricardo Lourenço dos Santos",
    "telecom" : [{
      "system" : "url",
      "value" : "https://linktr.ee/ricardolsantos"
    }]
  }],
  "description" : "Mapping from custom openEHR archetypes for wearable lifestyle medicine data to OMOP CDM v5.4 concepts.\n\nTarget OMOP Tables:\n- MEASUREMENT: HRV metrics, sleep metrics, activity metrics\n- DEVICE_EXPOSURE: Wearable device usage periods\n- OBSERVATION: Categorical lifestyle data\n\nKey OMOP Concepts Used:\n- 3034658: Heart rate variability\n- 40771110: Sleep duration\n- 4090484: Physical activity\n- Custom concepts required for RMSSD, pNN50 (OHDSI Concept ID = 0)\n\nArchitecture:\n- Compatible with ETL pipelines from EHRbase to OMOP\n- Supports ATLAS cohort definitions\n- Enables OHDSI network studies",
  "jurisdiction" : [{
    "coding" : [{
      "system" : "http://unstats.un.org/unsd/methods/m49/m49.htm",
      "code" : "150",
      "display" : "Europe"
    }]
  },
  {
    "coding" : [{
      "system" : "http://unstats.un.org/unsd/methods/m49/m49.htm",
      "code" : "021",
      "display" : "Northern America a/"
    }]
  },
  {
    "coding" : [{
      "system" : "http://unstats.un.org/unsd/methods/m49/m49.htm",
      "code" : "005",
      "display" : "South America"
    }]
  },
  {
    "coding" : [{
      "system" : "urn:iso:std:iso:3166",
      "code" : "PT",
      "display" : "Portugal"
    }]
  },
  {
    "coding" : [{
      "system" : "urn:iso:std:iso:3166",
      "code" : "US",
      "display" : "United States of America"
    }]
  },
  {
    "coding" : [{
      "system" : "urn:iso:std:iso:3166",
      "code" : "BR",
      "display" : "Brazil"
    }]
  }],
  "purpose" : "Enable transformation of wearable health data from openEHR CDRs to OMOP CDM for participation in OHDSI federated research networks.",
  "sourceUri" : "https://ckm.openehr.org/ckm",
  "targetUri" : "http://athena.ohdsi.org/search-terms/terms",
  "group" : [{
    "source" : "openEHR-EHR-OBSERVATION.heart_rate_variability.v0",
    "target" : "MEASUREMENT",
    "element" : [{
      "code" : "id5",
      "display" : "SDNN - Standard deviation of NN intervals",
      "target" : [{
        "code" : "3034658",
        "display" : "OMOP Concept: Heart rate variability",
        "equivalence" : "wider",
        "comment" : "OMOP 3034658 maps to general HRV. Store in MEASUREMENT with value_as_number (ms), unit_concept_id = 8587 (millisecond)"
      }]
    },
    {
      "code" : "id6",
      "display" : "RMSSD - Root mean square of successive differences",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "CRITICAL GAP: RMSSD has NO OMOP concept (Concept ID = 0). Requires local custom concept creation. Most important wearable HRV metric."
      }]
    },
    {
      "code" : "id7",
      "display" : "pNN50 - Percentage of NN intervals >50ms",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "GAP: pNN50 has no OMOP concept. Requires local custom concept. Unit: percentage"
      }]
    },
    {
      "code" : "id13",
      "display" : "LF/HF Ratio",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "GAP: LF/HF ratio has no OMOP concept. Indicates sympathovagal balance. Dimensionless ratio."
      }]
    },
    {
      "code" : "id32",
      "display" : "Recording duration",
      "target" : [{
        "code" : "4272025",
        "display" : "OMOP Concept: Duration of procedure",
        "equivalence" : "relatedto",
        "comment" : "Store as modifier or in MEASUREMENT_TYPE_CONCEPT_ID context. Critical for HRV interpretation (5min vs 24h)"
      }]
    },
    {
      "code" : "id41",
      "display" : "Physiological state",
      "target" : [{
        "code" : "4058895",
        "display" : "OMOP Concept: Body position",
        "equivalence" : "relatedto",
        "comment" : "Store in OBSERVATION table with value_as_concept_id for resting/active/sleep states"
      }]
    }],
    "unmapped" : {
      "mode" : "fixed",
      "code" : "0",
      "display" : "Unmapped HRV element - requires custom OMOP concept"
    }
  },
  {
    "source" : "openEHR-EHR-OBSERVATION.physical_activity_detailed.v0",
    "target" : "MEASUREMENT",
    "element" : [{
      "code" : "id10",
      "display" : "Step count",
      "target" : [{
        "code" : "40770386",
        "display" : "OMOP Concept: Number of steps",
        "equivalence" : "equivalent",
        "comment" : "Store in MEASUREMENT with value_as_number (count), unit_concept_id = 8554 (count)"
      }]
    },
    {
      "code" : "id11",
      "display" : "Distance",
      "target" : [{
        "code" : "4149130",
        "display" : "OMOP Concept: Distance walked",
        "equivalence" : "equivalent",
        "comment" : "Store in MEASUREMENT with value_as_number, unit_concept_id = 8582 (kilometer) or 8504 (meter)"
      }]
    },
    {
      "code" : "id20",
      "display" : "Active calories",
      "target" : [{
        "code" : "4074432",
        "display" : "OMOP Concept: Energy expenditure",
        "equivalence" : "equivalent",
        "comment" : "Store in MEASUREMENT with value_as_number, unit_concept_id = 9526 (kilocalorie)"
      }]
    },
    {
      "code" : "id32",
      "display" : "Moderately active minutes",
      "target" : [{
        "code" : "4090484",
        "display" : "OMOP Concept: Physical activity",
        "equivalence" : "wider",
        "comment" : "Store with qualifier concept for moderate intensity. Unit: minutes. WHO guideline target: 150-300 min/week"
      }]
    },
    {
      "code" : "id33",
      "display" : "Vigorously active minutes",
      "target" : [{
        "code" : "4090484",
        "display" : "OMOP Concept: Physical activity",
        "equivalence" : "wider",
        "comment" : "Store with qualifier concept for vigorous intensity. Unit: minutes. WHO guideline target: 75-150 min/week"
      }]
    }]
  },
  {
    "source" : "openEHR-EHR-OBSERVATION.sleep_architecture.v0",
    "target" : "MEASUREMENT",
    "element" : [{
      "code" : "id13",
      "display" : "Total sleep time",
      "target" : [{
        "code" : "40771110",
        "display" : "OMOP Concept: Sleep duration",
        "equivalence" : "equivalent",
        "comment" : "Store in MEASUREMENT with value_as_number, unit_concept_id = 8505 (hour) or 8550 (minute)"
      }]
    },
    {
      "code" : "id23",
      "display" : "Deep sleep duration",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "GAP: N3/SWS stage duration has no OMOP concept. Critical for sleep quality assessment. Requires local custom concept."
      }]
    },
    {
      "code" : "id24",
      "display" : "REM sleep duration",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "GAP: REM stage duration has no OMOP concept. Important for memory consolidation assessment. Requires local custom concept."
      }]
    },
    {
      "code" : "id30",
      "display" : "Sleep efficiency",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "GAP: TST/TIB ratio (%) has no OMOP concept. Key metric for sleep quality. Normal: >85%"
      }]
    },
    {
      "code" : "id40",
      "display" : "Sleep score",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "Proprietary composite score (0-100). Not suitable for cross-vendor research. Store with vendor qualifier."
      }]
    },
    {
      "code" : "id53",
      "display" : "Average HRV (RMSSD) during sleep",
      "target" : [{
        "equivalence" : "unmatched",
        "comment" : "Depends on RMSSD custom concept creation. Critical for recovery assessment."
      }]
    }]
  },
  {
    "source" : "openEHR-EHR-CLUSTER.wearable_device.v0",
    "target" : "DEVICE_EXPOSURE",
    "element" : [{
      "code" : "id2",
      "display" : "Device platform",
      "target" : [{
        "code" : "4044180",
        "display" : "OMOP Concept: Wearable sensor",
        "equivalence" : "wider",
        "comment" : "Store in DEVICE_EXPOSURE with device_concept_id = 4044180. Add vendor qualifier in device_source_value"
      }]
    },
    {
      "code" : "id3",
      "display" : "Device model",
      "target" : [{
        "code" : "4044180",
        "display" : "Store in device_source_value",
        "equivalence" : "relatedto",
        "comment" : "Store specific model name in device_source_value field (e.g., 'Apple Watch Series 9')"
      }]
    },
    {
      "code" : "id4",
      "display" : "Device category",
      "target" : [{
        "code" : "44818707",
        "display" : "OMOP Concept: Patient self-reported",
        "equivalence" : "relatedto",
        "comment" : "Use device_type_concept_id = 44818707 for wearable-generated data provenance"
      }]
    },
    {
      "code" : "id23",
      "display" : "Serial number",
      "target" : [{
        "code" : "32882",
        "display" : "Store in unique_device_id",
        "equivalence" : "equivalent",
        "comment" : "Map to unique_device_id field in DEVICE_EXPOSURE"
      }]
    },
    {
      "code" : "id20",
      "display" : "Firmware version",
      "target" : [{
        "code" : "0",
        "display" : "Not mapped - metadata only",
        "equivalence" : "disjoint",
        "comment" : "Firmware version not typically stored in OMOP CDM. Consider NOTE table or custom extension."
      }]
    }]
  }]
}