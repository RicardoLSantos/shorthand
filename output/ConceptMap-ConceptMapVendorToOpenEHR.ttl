@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapVendorToOpenEHR> a fhir:ConceptMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "ConceptMapVendorToOpenEHR"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Narrativa gerada: ConceptMap ConceptMapVendorToOpenEHR</b></p><a name=\"ConceptMapVendorToOpenEHR\"> </a><a name=\"hcConceptMapVendorToOpenEHR\"> </a><p>Mapeamento de https://2rdoc.pt/ig/ios-lifestyle-medicine/vendor-apis para https://ckm.openehr.org/ckm</p><br/><p><b>Grupo 1 </b>Mapeamento de <code>com.apple.health</code> to <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>HKQuantityTypeIdentifierHeartRateVariabilitySDNN (Apple HealthKit: Heart Rate Variability SDNN)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id5 (SDNN - Standard deviation of NN intervals)</td><td>HealthKit provides SDNN in milliseconds. Direct mapping. Note: Apple uses proprietary algorithm from PPG.</td></tr><tr><td>HKQuantityTypeIdentifierHeartRate (Apple HealthKit: Heart Rate)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id50 (Mean heart rate during recording)</td><td>Use mean HR from same recording period for HRV context. Unit: bpm</td></tr></table><hr/><p><b>Grupo 2 </b>Mapeamento de <code>com.fitbit.hrv</code> to <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>dailyRmssd (Fitbit: Daily RMSSD average)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id6 (RMSSD - Root mean square of successive differences)</td><td>Fitbit provides daily RMSSD average. CAUTION: This is AVERAGED across deep sleep periods, not a single measurement.</td></tr><tr><td>deepRmssd (Fitbit: Deep sleep RMSSD)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id6 (RMSSD during deep sleep)</td><td>Fitbit provides RMSSD specifically from deep sleep stages. Set physiological_state (id41) = 'sleep'</td></tr><tr><td>coverage (Fitbit: HRV data coverage percentage)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id60 (Data quality indicator)</td><td>Percentage of night with valid HRV data. Use as quality indicator. &lt;80% suggests poor data quality.</td></tr></table><hr/><p><b>Grupo 3 </b>Mapeamento de <code>com.ouraring</code> to <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>average_hrv (Oura: Average nightly HRV (RMSSD))</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id6 (RMSSD - Root mean square of successive differences)</td><td>Oura provides nightly average RMSSD. Measured during sleep. Unit: ms. Set physiological_state = 'sleep'</td></tr><tr><td>hrv_balance (Oura: HRV Balance score)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id70 (Vendor-specific recovery score)</td><td>PROPRIETARY: Oura HRV Balance is a 7-day trend normalized score. NOT comparable to raw RMSSD.</td></tr><tr><td>readiness_score (Oura: Readiness Score)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id71 (Vendor-specific readiness score)</td><td>PROPRIETARY: Composite score including HRV, sleep, activity, temperature. Scale 0-100. NOT suitable for cross-vendor comparison.</td></tr></table><hr/><p><b>Grupo 4 </b>Mapeamento de <code>com.garmin.connect</code> to <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>avgHrv (Garmin: Average overnight HRV)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id6 (RMSSD - Root mean square of successive differences)</td><td>Garmin provides average overnight RMSSD. Set physiological_state = 'sleep'. Unit: ms</td></tr><tr><td>stressLevel (Garmin: Stress Level)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id72 (Vendor-specific stress score)</td><td>PROPRIETARY: Garmin stress level is DERIVED from HRV. Scale 0-100 (inverted: low = relaxed). Formula not disclosed.</td></tr><tr><td>hrvStatus (Garmin: HRV Status)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto\" title=\"relatedto\">is related to</a></td><td>id73 (Vendor-specific HRV status)</td><td>Categorical status: Low, Balanced, High. Relative to personal baseline. PROPRIETARY algorithm.</td></tr></table><hr/><p><b>Grupo 5 </b>Mapeamento de <code>com.polar</code> to <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>hrv_rmssd (Polar: HRV RMSSD)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id6 (SDNN - Standard deviation of NN intervals)</td><td>Polar H10 provides RMSSD from ECG (gold standard). Higher accuracy than PPG-based wearables. Unit: ms</td></tr><tr><td>hrv_sdnn (Polar: HRV SDNN)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id5</td><td>Polar provides SDNN from ECG. High accuracy. Unit: ms</td></tr><tr><td>hrv_pnn50 (Polar: HRV pNN50)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id7 (pNN50 - Percentage of NN intervals &gt;50ms)</td><td>Polar provides pNN50 from ECG. Unit: percentage (0-100)</td></tr></table><hr/><p><b>Grupo 6 </b>Mapeamento de <code>com.apple.health</code> to <code>openEHR-EHR-OBSERVATION.sleep_architecture.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>HKCategoryValueSleepAnalysisAsleepCore (Apple HealthKit: Core Sleep)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id21 (Light sleep duration (N1+N2))</td><td>Apple 'Core' sleep maps to light sleep (N1+N2 equivalent). watchOS 9+.</td></tr><tr><td>HKCategoryValueSleepAnalysisAsleepDeep (Apple HealthKit: Deep Sleep)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id23 (Deep sleep duration (N3/SWS))</td><td>Apple 'Deep' sleep maps to N3/SWS. watchOS 9+.</td></tr><tr><td>HKCategoryValueSleepAnalysisAsleepREM (Apple HealthKit: REM Sleep)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id24 (REM sleep duration)</td><td>Apple 'REM' sleep maps directly. watchOS 9+.</td></tr><tr><td>HKCategoryValueSleepAnalysisAwake (Apple HealthKit: Awake during sleep)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id20 (Awake time during sleep period)</td><td>Contributes to WASO (Wake After Sleep Onset) calculation.</td></tr></table><hr/><p><b>Grupo 7 </b>Mapeamento de <code>com.apple.health</code> to <code>openEHR-EHR-OBSERVATION.physical_activity_detailed.v0</code></p><table class=\"grid\"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>HKQuantityTypeIdentifierStepCount (Apple HealthKit: Step Count)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id10 (Step count)</td><td>Direct mapping. Unit: count. Aggregate daily total.</td></tr><tr><td>HKQuantityTypeIdentifierDistanceWalkingRunning (Apple HealthKit: Distance Walking/Running)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id11 (Distance)</td><td>Convert from meters to km if needed. Aggregate daily total.</td></tr><tr><td>HKQuantityTypeIdentifierActiveEnergyBurned (Apple HealthKit: Active Energy Burned)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent\" title=\"equivalent\">is equivalent to</a></td><td>id20 (Active calories)</td><td>HealthKit provides in kilocalories (kcal). Direct mapping.</td></tr><tr><td>HKQuantityTypeIdentifierAppleExerciseTime (Apple HealthKit: Exercise Time)</td><td><a href=\"http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider\" title=\"wider\">maps to wider concept</a></td><td>id35 (Exercise session duration)</td><td>Apple Exercise Time threshold: HR &gt; ~60-70% of estimated max. Maps to moderate+vigorous combined.</td></tr></table></div>"^^rdf:XMLLiteral
  ] ; # 
  fhir:url [ fhir:v "https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapVendorToOpenEHR"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "0.1.0"] ; # 
  fhir:name [ fhir:v "ConceptMapVendorToOpenEHR"] ; # 
  fhir:title [ fhir:v "Wearable Vendor API to openEHR Archetype Mapping"] ; # 
  fhir:status [ fhir:v "active"] ; # 
  fhir:experimental [ fhir:v false] ; # 
  fhir:date [ fhir:v "2025-11-25"^^xsd:date] ; # 
  fhir:publisher [ fhir:v "Ricardo Lourenço dos Santos"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "Ricardo Lourenço dos Santos" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "https://linktr.ee/ricardolsantos" ]
     ] )
  ] ) ; # 
  fhir:description [ fhir:v "Direct mapping from proprietary wearable vendor API data types to openEHR archetypes.\n\nSupported Vendors:\n- Apple HealthKit (HKQuantityType, HKCategoryType)\n- Fitbit Web API (activities, sleep, hrv endpoints)\n- Oura Ring API (readiness, sleep, activity)\n- Garmin Connect API (activities, wellness, sleep)\n- Polar Flow API (training, recovery)\n\nArchitecture:\n- Enables direct ETL from vendor export to EHRbase CDR\n- Normalizes proprietary units to UCUM\n- Handles vendor-specific scoring algorithms\n- Documents transformation caveats and data quality considerations\n\nUse Cases:\n- Patient-generated health data (PGHD) capture\n- Multi-vendor data aggregation\n- Longitudinal wearable data repositories"] ; # 
  fhir:jurisdiction ( [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "150" ] ;
       fhir:display [ fhir:v "Europe" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "021" ] ;
       fhir:display [ fhir:v "Northern America a/" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "005" ] ;
       fhir:display [ fhir:v "South America" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "PT" ] ;
       fhir:display [ fhir:v "Portugal" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "US" ] ;
       fhir:display [ fhir:v "United States of America" ]
     ] )
  ] [
     fhir:coding ( [
       fhir:system [ fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "BR" ] ;
       fhir:display [ fhir:v "Brazil" ]
     ] )
  ] ) ; # 
  fhir:purpose [ fhir:v "Enable standardized capture of wearable data from multiple vendors into openEHR Clinical Data Repositories via direct ETL pipelines."] ; # 
  fhir:source [
     a fhir:uri ;
     fhir:v "https://2rdoc.pt/ig/ios-lifestyle-medicine/vendor-apis"^^xsd:anyURI
  ] ; # 
  fhir:target [
     a fhir:uri ;
     fhir:v "https://ckm.openehr.org/ckm"^^xsd:anyURI
  ] ; # 
  fhir:group ( [
     fhir:source [ fhir:v "com.apple.health"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.heart_rate_variability.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierHeartRateVariabilitySDNN" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Heart Rate Variability SDNN" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id5" ] ;
         fhir:display [ fhir:v "SDNN - Standard deviation of NN intervals" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "HealthKit provides SDNN in milliseconds. Direct mapping. Note: Apple uses proprietary algorithm from PPG." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierHeartRate" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Heart Rate" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id50" ] ;
         fhir:display [ fhir:v "Mean heart rate during recording" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "Use mean HR from same recording period for HRV context. Unit: bpm" ]
       ] )
     ] ) ;
     fhir:unmapped [
       fhir:mode [ fhir:v "fixed" ] ;
       fhir:code [ fhir:v "other" ] ;
       fhir:display [ fhir:v "Unmapped HealthKit HRV type" ]
     ]
  ] [
     fhir:source [ fhir:v "com.fitbit.hrv"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.heart_rate_variability.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "dailyRmssd" ] ;
       fhir:display [ fhir:v "Fitbit: Daily RMSSD average" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id6" ] ;
         fhir:display [ fhir:v "RMSSD - Root mean square of successive differences" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Fitbit provides daily RMSSD average. CAUTION: This is AVERAGED across deep sleep periods, not a single measurement." ]
       ] )
     ] [
       fhir:code [ fhir:v "deepRmssd" ] ;
       fhir:display [ fhir:v "Fitbit: Deep sleep RMSSD" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id6" ] ;
         fhir:display [ fhir:v "RMSSD during deep sleep" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Fitbit provides RMSSD specifically from deep sleep stages. Set physiological_state (id41) = 'sleep'" ]
       ] )
     ] [
       fhir:code [ fhir:v "coverage" ] ;
       fhir:display [ fhir:v "Fitbit: HRV data coverage percentage" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id60" ] ;
         fhir:display [ fhir:v "Data quality indicator" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "Percentage of night with valid HRV data. Use as quality indicator. <80% suggests poor data quality." ]
       ] )
     ] )
  ] [
     fhir:source [ fhir:v "com.ouraring"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.heart_rate_variability.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "average_hrv" ] ;
       fhir:display [ fhir:v "Oura: Average nightly HRV (RMSSD)" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id6" ] ;
         fhir:display [ fhir:v "RMSSD - Root mean square of successive differences" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Oura provides nightly average RMSSD. Measured during sleep. Unit: ms. Set physiological_state = 'sleep'" ]
       ] )
     ] [
       fhir:code [ fhir:v "hrv_balance" ] ;
       fhir:display [ fhir:v "Oura: HRV Balance score" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id70" ] ;
         fhir:display [ fhir:v "Vendor-specific recovery score" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "PROPRIETARY: Oura HRV Balance is a 7-day trend normalized score. NOT comparable to raw RMSSD." ]
       ] )
     ] [
       fhir:code [ fhir:v "readiness_score" ] ;
       fhir:display [ fhir:v "Oura: Readiness Score" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id71" ] ;
         fhir:display [ fhir:v "Vendor-specific readiness score" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "PROPRIETARY: Composite score including HRV, sleep, activity, temperature. Scale 0-100. NOT suitable for cross-vendor comparison." ]
       ] )
     ] )
  ] [
     fhir:source [ fhir:v "com.garmin.connect"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.heart_rate_variability.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "avgHrv" ] ;
       fhir:display [ fhir:v "Garmin: Average overnight HRV" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id6" ] ;
         fhir:display [ fhir:v "RMSSD - Root mean square of successive differences" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Garmin provides average overnight RMSSD. Set physiological_state = 'sleep'. Unit: ms" ]
       ] )
     ] [
       fhir:code [ fhir:v "stressLevel" ] ;
       fhir:display [ fhir:v "Garmin: Stress Level" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id72" ] ;
         fhir:display [ fhir:v "Vendor-specific stress score" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "PROPRIETARY: Garmin stress level is DERIVED from HRV. Scale 0-100 (inverted: low = relaxed). Formula not disclosed." ]
       ] )
     ] [
       fhir:code [ fhir:v "hrvStatus" ] ;
       fhir:display [ fhir:v "Garmin: HRV Status" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id73" ] ;
         fhir:display [ fhir:v "Vendor-specific HRV status" ] ;
         fhir:equivalence [ fhir:v "relatedto" ] ;
         fhir:comment [ fhir:v "Categorical status: Low, Balanced, High. Relative to personal baseline. PROPRIETARY algorithm." ]
       ] )
     ] )
  ] [
     fhir:source [ fhir:v "com.polar"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.heart_rate_variability.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "hrv_rmssd" ] ;
       fhir:display [ fhir:v "Polar: HRV RMSSD" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id6" ] ;
         fhir:display [ fhir:v "SDNN - Standard deviation of NN intervals" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Polar H10 provides RMSSD from ECG (gold standard). Higher accuracy than PPG-based wearables. Unit: ms" ]
       ] )
     ] [
       fhir:code [ fhir:v "hrv_sdnn" ] ;
       fhir:display [ fhir:v "Polar: HRV SDNN" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id5" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Polar provides SDNN from ECG. High accuracy. Unit: ms" ]
       ] )
     ] [
       fhir:code [ fhir:v "hrv_pnn50" ] ;
       fhir:display [ fhir:v "Polar: HRV pNN50" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id7" ] ;
         fhir:display [ fhir:v "pNN50 - Percentage of NN intervals >50ms" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Polar provides pNN50 from ECG. Unit: percentage (0-100)" ]
       ] )
     ] )
  ] [
     fhir:source [ fhir:v "com.apple.health"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.sleep_architecture.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "HKCategoryValueSleepAnalysisAsleepCore" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Core Sleep" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id21" ] ;
         fhir:display [ fhir:v "Light sleep duration (N1+N2)" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Apple 'Core' sleep maps to light sleep (N1+N2 equivalent). watchOS 9+." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKCategoryValueSleepAnalysisAsleepDeep" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Deep Sleep" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id23" ] ;
         fhir:display [ fhir:v "Deep sleep duration (N3/SWS)" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Apple 'Deep' sleep maps to N3/SWS. watchOS 9+." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKCategoryValueSleepAnalysisAsleepREM" ] ;
       fhir:display [ fhir:v "Apple HealthKit: REM Sleep" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id24" ] ;
         fhir:display [ fhir:v "REM sleep duration" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Apple 'REM' sleep maps directly. watchOS 9+." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKCategoryValueSleepAnalysisAwake" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Awake during sleep" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id20" ] ;
         fhir:display [ fhir:v "Awake time during sleep period" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Contributes to WASO (Wake After Sleep Onset) calculation." ]
       ] )
     ] )
  ] [
     fhir:source [ fhir:v "com.apple.health"^^xsd:anyURI ] ;
     fhir:target [ fhir:v "openEHR-EHR-OBSERVATION.physical_activity_detailed.v0"^^xsd:anyURI ] ;
     fhir:element ( [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierStepCount" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Step Count" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id10" ] ;
         fhir:display [ fhir:v "Step count" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Direct mapping. Unit: count. Aggregate daily total." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierDistanceWalkingRunning" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Distance Walking/Running" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id11" ] ;
         fhir:display [ fhir:v "Distance" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "Convert from meters to km if needed. Aggregate daily total." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierActiveEnergyBurned" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Active Energy Burned" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id20" ] ;
         fhir:display [ fhir:v "Active calories" ] ;
         fhir:equivalence [ fhir:v "equivalent" ] ;
         fhir:comment [ fhir:v "HealthKit provides in kilocalories (kcal). Direct mapping." ]
       ] )
     ] [
       fhir:code [ fhir:v "HKQuantityTypeIdentifierAppleExerciseTime" ] ;
       fhir:display [ fhir:v "Apple HealthKit: Exercise Time" ] ;
       fhir:target ( [
         fhir:code [ fhir:v "id35" ] ;
         fhir:display [ fhir:v "Exercise session duration" ] ;
         fhir:equivalence [ fhir:v "wider" ] ;
         fhir:comment [ fhir:v "Apple Exercise Time threshold: HR > ~60-70% of estimated max. Maps to moderate+vigorous combined." ]
       ] )
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

