<?xml version="1.0" encoding="UTF-8"?>

<ConceptMap xmlns="http://hl7.org/fhir">
  <id value="ConceptMapOpenEHRToOMOP"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p class="res-header-id"><b>Narrativa gerada: ConceptMap ConceptMapOpenEHRToOMOP</b></p><a name="ConceptMapOpenEHRToOMOP"> </a><a name="hcConceptMapOpenEHRToOMOP"> </a><p>Mapeamento de (não especificado) para (não especificado)</p><br/><p><b>Grupo 1 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.heart_rate_variability.v0</code> to <code>MEASUREMENT</code></p><table class="grid"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id5 (SDNN - Standard deviation of NN intervals)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider" title="wider">maps to wider concept</a></td><td>3034658 (OMOP Concept: Heart rate variability)</td><td>OMOP 3034658 maps to general HRV. Store in MEASUREMENT with value_as_number (ms), unit_concept_id = 8587 (millisecond)</td></tr><tr><td>id6 (RMSSD - Root mean square of successive differences)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">CRITICAL GAP: RMSSD has NO OMOP concept (Concept ID = 0). Requires local custom concept creation. Most important wearable HRV metric.</td></tr><tr><td>id7 (pNN50 - Percentage of NN intervals &gt;50ms)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">GAP: pNN50 has no OMOP concept. Requires local custom concept. Unit: percentage</td></tr><tr><td>id13 (LF/HF Ratio)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">GAP: LF/HF ratio has no OMOP concept. Indicates sympathovagal balance. Dimensionless ratio.</td></tr><tr><td>id32 (Recording duration)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto" title="relatedto">is related to</a></td><td>4272025 (OMOP Concept: Duration of procedure)</td><td>Store as modifier or in MEASUREMENT_TYPE_CONCEPT_ID context. Critical for HRV interpretation (5min vs 24h)</td></tr><tr><td>id41 (Physiological state)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto" title="relatedto">is related to</a></td><td>4058895 (OMOP Concept: Body position)</td><td>Store in OBSERVATION table with value_as_concept_id for resting/active/sleep states</td></tr></table><hr/><p><b>Grupo 2 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.physical_activity_detailed.v0</code> to <code>MEASUREMENT</code></p><table class="grid"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id10 (Step count)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent" title="equivalent">is equivalent to</a></td><td>40770386 (OMOP Concept: Number of steps)</td><td>Store in MEASUREMENT with value_as_number (count), unit_concept_id = 8554 (count)</td></tr><tr><td>id11 (Distance)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent" title="equivalent">is equivalent to</a></td><td>4149130 (OMOP Concept: Distance walked)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 8582 (kilometer) or 8504 (meter)</td></tr><tr><td>id20 (Active calories)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent" title="equivalent">is equivalent to</a></td><td>4074432 (OMOP Concept: Energy expenditure)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 9526 (kilocalorie)</td></tr><tr><td>id32 (Moderately active minutes)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider" title="wider">maps to wider concept</a></td><td>4090484 (OMOP Concept: Physical activity)</td><td>Store with qualifier concept for moderate intensity. Unit: minutes. WHO guideline target: 150-300 min/week</td></tr><tr><td>id33 (Vigorously active minutes)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider" title="wider">maps to wider concept</a></td><td>4090484 (OMOP Concept: Physical activity)</td><td>Store with qualifier concept for vigorous intensity. Unit: minutes. WHO guideline target: 75-150 min/week</td></tr></table><hr/><p><b>Grupo 3 </b>Mapeamento de <code>openEHR-EHR-OBSERVATION.sleep_architecture.v0</code> to <code>MEASUREMENT</code></p><table class="grid"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id13 (Total sleep time)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent" title="equivalent">is equivalent to</a></td><td>40771110 (OMOP Concept: Sleep duration)</td><td>Store in MEASUREMENT with value_as_number, unit_concept_id = 8505 (hour) or 8550 (minute)</td></tr><tr><td>id23 (Deep sleep duration)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">GAP: N3/SWS stage duration has no OMOP concept. Critical for sleep quality assessment. Requires local custom concept.</td></tr><tr><td>id24 (REM sleep duration)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">GAP: REM stage duration has no OMOP concept. Important for memory consolidation assessment. Requires local custom concept.</td></tr><tr><td>id30 (Sleep efficiency)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">GAP: TST/TIB ratio (%) has no OMOP concept. Key metric for sleep quality. Normal: &gt;85%</td></tr><tr><td>id40 (Sleep score)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">Proprietary composite score (0-100). Not suitable for cross-vendor research. Store with vendor qualifier.</td></tr><tr><td>id53 (Average HRV (RMSSD) during sleep)</td><td colspan="2" style="background-color: #efefef">(not mapped)</td><td style="background-color: #efefef">Depends on RMSSD custom concept creation. Critical for recovery assessment.</td></tr></table><hr/><p><b>Grupo 4 </b>Mapeamento de <code>openEHR-EHR-CLUSTER.wearable_device.v0</code> to <code>DEVICE_EXPOSURE</code></p><table class="grid"><tr><td><b>Código fonte</b></td><td><b>Relacionamento</b></td><td><b>Código de destino</b></td><td><b>Comentário</b></td></tr><tr><td>id2 (Device platform)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#wider" title="wider">maps to wider concept</a></td><td>4044180 (OMOP Concept: Wearable sensor)</td><td>Store in DEVICE_EXPOSURE with device_concept_id = 4044180. Add vendor qualifier in device_source_value</td></tr><tr><td>id3 (Device model)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto" title="relatedto">is related to</a></td><td>4044180 (Store in device_source_value)</td><td>Store specific model name in device_source_value field (e.g., 'Apple Watch Series 9')</td></tr><tr><td>id4 (Device category)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#relatedto" title="relatedto">is related to</a></td><td>44818707 (OMOP Concept: Patient self-reported)</td><td>Use device_type_concept_id = 44818707 for wearable-generated data provenance</td></tr><tr><td>id23 (Serial number)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#equivalent" title="equivalent">is equivalent to</a></td><td>32882 (Store in unique_device_id)</td><td>Map to unique_device_id field in DEVICE_EXPOSURE</td></tr><tr><td>id20 (Firmware version)</td><td><a href="http://hl7.org/fhir/R5/codesystem-concept-map-relationship.html#disjoint" title="disjoint">is not related to</a></td><td>0 (Not mapped - metadata only)</td><td>Firmware version not typically stored in OMOP CDM. Consider NOTE table or custom extension.</td></tr></table></div>
  </text>
  <url value="https://2rdoc.pt/ig/ios-lifestyle-medicine/ConceptMap/ConceptMapOpenEHRToOMOP"/>
  <version value="0.1.0"/>
  <name value="ConceptMapOpenEHRToOMOP"/>
  <title value="openEHR Archetype to OMOP CDM Mapping"/>
  <status value="active"/>
  <experimental value="false"/>
  <date value="2025-11-25"/>
  <publisher value="Ricardo Lourenço dos Santos"/>
  <contact>
    <name value="Ricardo Lourenço dos Santos"/>
    <telecom>
      <system value="url"/>
      <value value="https://linktr.ee/ricardolsantos"/>
    </telecom>
  </contact>
  <description value="Mapping from custom openEHR archetypes for wearable lifestyle medicine data to OMOP CDM v5.4 concepts.&#xA;&#xA;Target OMOP Tables:&#xA;- MEASUREMENT: HRV metrics, sleep metrics, activity metrics&#xA;- DEVICE_EXPOSURE: Wearable device usage periods&#xA;- OBSERVATION: Categorical lifestyle data&#xA;&#xA;Key OMOP Concepts Used:&#xA;- 3034658: Heart rate variability&#xA;- 40771110: Sleep duration&#xA;- 4090484: Physical activity&#xA;- Custom concepts required for RMSSD, pNN50 (OHDSI Concept ID = 0)&#xA;&#xA;Architecture:&#xA;- Compatible with ETL pipelines from EHRbase to OMOP&#xA;- Supports ATLAS cohort definitions&#xA;- Enables OHDSI network studies"/>
  <jurisdiction>
    <coding>
      <system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
      <code value="150"/>
      <display value="Europe"/>
    </coding>
  </jurisdiction>
  <jurisdiction>
    <coding>
      <system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
      <code value="021"/>
      <display value="Northern America a/"/>
    </coding>
  </jurisdiction>
  <jurisdiction>
    <coding>
      <system value="http://unstats.un.org/unsd/methods/m49/m49.htm"/>
      <code value="005"/>
      <display value="South America"/>
    </coding>
  </jurisdiction>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="PT"/>
      <display value="Portugal"/>
    </coding>
  </jurisdiction>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="US"/>
      <display value="United States of America"/>
    </coding>
  </jurisdiction>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="BR"/>
      <display value="Brazil"/>
    </coding>
  </jurisdiction>
  <purpose value="Enable transformation of wearable health data from openEHR CDRs to OMOP CDM for participation in OHDSI federated research networks."/>
  <group>
    <source value="openEHR-EHR-OBSERVATION.heart_rate_variability.v0"/>
    <target value="MEASUREMENT"/>
    <element>
      <code value="id5"/>
      <display value="SDNN - Standard deviation of NN intervals"/>
      <target>
        <code value="3034658"/>
        <display value="OMOP Concept: Heart rate variability"/>
        <equivalence value="wider"/>
        <comment value="OMOP 3034658 maps to general HRV. Store in MEASUREMENT with value_as_number (ms), unit_concept_id = 8587 (millisecond)"/>
      </target>
    </element>
    <element>
      <code value="id6"/>
      <display value="RMSSD - Root mean square of successive differences"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="CRITICAL GAP: RMSSD has NO OMOP concept (Concept ID = 0). Requires local custom concept creation. Most important wearable HRV metric."/>
      </target>
    </element>
    <element>
      <code value="id7"/>
      <display value="pNN50 - Percentage of NN intervals &gt;50ms"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="GAP: pNN50 has no OMOP concept. Requires local custom concept. Unit: percentage"/>
      </target>
    </element>
    <element>
      <code value="id13"/>
      <display value="LF/HF Ratio"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="GAP: LF/HF ratio has no OMOP concept. Indicates sympathovagal balance. Dimensionless ratio."/>
      </target>
    </element>
    <element>
      <code value="id32"/>
      <display value="Recording duration"/>
      <target>
        <code value="4272025"/>
        <display value="OMOP Concept: Duration of procedure"/>
        <equivalence value="relatedto"/>
        <comment value="Store as modifier or in MEASUREMENT_TYPE_CONCEPT_ID context. Critical for HRV interpretation (5min vs 24h)"/>
      </target>
    </element>
    <element>
      <code value="id41"/>
      <display value="Physiological state"/>
      <target>
        <code value="4058895"/>
        <display value="OMOP Concept: Body position"/>
        <equivalence value="relatedto"/>
        <comment value="Store in OBSERVATION table with value_as_concept_id for resting/active/sleep states"/>
      </target>
    </element>
    <unmapped>
      <mode value="fixed"/>
      <code value="0"/>
      <display value="Unmapped HRV element - requires custom OMOP concept"/>
    </unmapped>
  </group>
  <group>
    <source value="openEHR-EHR-OBSERVATION.physical_activity_detailed.v0"/>
    <target value="MEASUREMENT"/>
    <element>
      <code value="id10"/>
      <display value="Step count"/>
      <target>
        <code value="40770386"/>
        <display value="OMOP Concept: Number of steps"/>
        <equivalence value="equivalent"/>
        <comment value="Store in MEASUREMENT with value_as_number (count), unit_concept_id = 8554 (count)"/>
      </target>
    </element>
    <element>
      <code value="id11"/>
      <display value="Distance"/>
      <target>
        <code value="4149130"/>
        <display value="OMOP Concept: Distance walked"/>
        <equivalence value="equivalent"/>
        <comment value="Store in MEASUREMENT with value_as_number, unit_concept_id = 8582 (kilometer) or 8504 (meter)"/>
      </target>
    </element>
    <element>
      <code value="id20"/>
      <display value="Active calories"/>
      <target>
        <code value="4074432"/>
        <display value="OMOP Concept: Energy expenditure"/>
        <equivalence value="equivalent"/>
        <comment value="Store in MEASUREMENT with value_as_number, unit_concept_id = 9526 (kilocalorie)"/>
      </target>
    </element>
    <element>
      <code value="id32"/>
      <display value="Moderately active minutes"/>
      <target>
        <code value="4090484"/>
        <display value="OMOP Concept: Physical activity"/>
        <equivalence value="wider"/>
        <comment value="Store with qualifier concept for moderate intensity. Unit: minutes. WHO guideline target: 150-300 min/week"/>
      </target>
    </element>
    <element>
      <code value="id33"/>
      <display value="Vigorously active minutes"/>
      <target>
        <code value="4090484"/>
        <display value="OMOP Concept: Physical activity"/>
        <equivalence value="wider"/>
        <comment value="Store with qualifier concept for vigorous intensity. Unit: minutes. WHO guideline target: 75-150 min/week"/>
      </target>
    </element>
  </group>
  <group>
    <source value="openEHR-EHR-OBSERVATION.sleep_architecture.v0"/>
    <target value="MEASUREMENT"/>
    <element>
      <code value="id13"/>
      <display value="Total sleep time"/>
      <target>
        <code value="40771110"/>
        <display value="OMOP Concept: Sleep duration"/>
        <equivalence value="equivalent"/>
        <comment value="Store in MEASUREMENT with value_as_number, unit_concept_id = 8505 (hour) or 8550 (minute)"/>
      </target>
    </element>
    <element>
      <code value="id23"/>
      <display value="Deep sleep duration"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="GAP: N3/SWS stage duration has no OMOP concept. Critical for sleep quality assessment. Requires local custom concept."/>
      </target>
    </element>
    <element>
      <code value="id24"/>
      <display value="REM sleep duration"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="GAP: REM stage duration has no OMOP concept. Important for memory consolidation assessment. Requires local custom concept."/>
      </target>
    </element>
    <element>
      <code value="id30"/>
      <display value="Sleep efficiency"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="GAP: TST/TIB ratio (%) has no OMOP concept. Key metric for sleep quality. Normal: &gt;85%"/>
      </target>
    </element>
    <element>
      <code value="id40"/>
      <display value="Sleep score"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="Proprietary composite score (0-100). Not suitable for cross-vendor research. Store with vendor qualifier."/>
      </target>
    </element>
    <element>
      <code value="id53"/>
      <display value="Average HRV (RMSSD) during sleep"/>
      <target>
        <equivalence value="unmatched"/>
        <comment value="Depends on RMSSD custom concept creation. Critical for recovery assessment."/>
      </target>
    </element>
  </group>
  <group>
    <source value="openEHR-EHR-CLUSTER.wearable_device.v0"/>
    <target value="DEVICE_EXPOSURE"/>
    <element>
      <code value="id2"/>
      <display value="Device platform"/>
      <target>
        <code value="4044180"/>
        <display value="OMOP Concept: Wearable sensor"/>
        <equivalence value="wider"/>
        <comment value="Store in DEVICE_EXPOSURE with device_concept_id = 4044180. Add vendor qualifier in device_source_value"/>
      </target>
    </element>
    <element>
      <code value="id3"/>
      <display value="Device model"/>
      <target>
        <code value="4044180"/>
        <display value="Store in device_source_value"/>
        <equivalence value="relatedto"/>
        <comment value="Store specific model name in device_source_value field (e.g., 'Apple Watch Series 9')"/>
      </target>
    </element>
    <element>
      <code value="id4"/>
      <display value="Device category"/>
      <target>
        <code value="44818707"/>
        <display value="OMOP Concept: Patient self-reported"/>
        <equivalence value="relatedto"/>
        <comment value="Use device_type_concept_id = 44818707 for wearable-generated data provenance"/>
      </target>
    </element>
    <element>
      <code value="id23"/>
      <display value="Serial number"/>
      <target>
        <code value="32882"/>
        <display value="Store in unique_device_id"/>
        <equivalence value="equivalent"/>
        <comment value="Map to unique_device_id field in DEVICE_EXPOSURE"/>
      </target>
    </element>
    <element>
      <code value="id20"/>
      <display value="Firmware version"/>
      <target>
        <code value="0"/>
        <display value="Not mapped - metadata only"/>
        <equivalence value="disjoint"/>
        <comment value="Firmware version not typically stored in OMOP CDM. Consider NOTE table or custom extension."/>
      </target>
    </element>
  </group>
</ConceptMap>